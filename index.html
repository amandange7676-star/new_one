<!DOCTYPE html>
<html><head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="Professional travel agencies offering customized tour packages, flight bookings, hotel reservations, and travel planning services.">
            <meta name="keywords" content="travel agency, tours, vacation packages, flights, hotel bookings">
            <title>Home</title>
            <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;family=Open+Sans:wght@400;600&amp;display=swap" rel="stylesheet">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
            <link rel="stylesheet" href="assets/css/style.css">
            <link rel="stylesheet" href="assets/css/middle_sections.css">
            <link rel="stylesheet" href="assets/css/components/header-2.css">
            <link rel="stylesheet" href="assets/css/components/footer-1.css">
            <link rel="stylesheet" href="assets/css/bootstrap.css">
            <link rel="stylesheet" href="assets/css/plugins.css">
	        <link rel="stylesheet" href="assets/css/custom-Imports.css">
            <link rel="stylesheet" href="assets/css/resonsive.css">
            	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
        <style>
            :root {
                --site-font: "Playfair Display", serif;
            }
            body, #wrapper, #wrapper * {
                font-family: var(--site-font) !important;
            }
		
        </style>
        </head>
        <body class="theme-1">
            <div id="wrapper">
            <div id="header" data-src="header.html"></div>
            <div id="mainPageContent">
        
    <div id="middle_section_default">
    <article class="container text-info-block">
        <div class="row">
            <div class="col-xs-12" style="text-align: center;">
                <h2></h2><br>
                <button class="custombtn" id="AddNewSection">A</button>

            </div>
        </div>
    </article>
</div>
</div>
            <div id="footer" data-src="footer.html"></div>

            </div>
            <script src="assets/js/jquery.js"></script>
            <script src="assets/js/init.js"></script>
            <script src="assets/js/plugins.js"></script>
            <script src="assets/js/jquery.main.js"></script>
            <script src="assets/js/gsap.min.js"></script>
            <script src="assets/js/ScrollTrigger.min.js"></script>
            <script src="assets/js/Observer.min.js"></script>
            <script src="assets/js/gsap.effects.js"></script>

            <script src="assets/js/common_js/html_changer_working.js"></script>
            <script src="assets/js/common_js/windows_postmessage.js"></script>
			 <script src="assets/js/common_js/image_editor.js"></script>
			<!-- <script src="assets/js/common_js/image_editor.js"></script> -->
			<!-- <script src="assets/js/common_js/replace_image.js"></script> -->
			
            <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
            <script>
                var fileName = document.title || "index";

                $(document).ready(function () {
                /* Start code to load js and css files properly on local server or production server: NOte: this is the workwround, need to fix this */
                loadHeaderFooter("header", "assets/new_one/new_one/header.html");
                loadHeaderFooter("footer", "assets/new_one/new_one/footer.html");
                /*  End code */

                /*  Start code to load js and css files properly on Githubpages  */
                loadHeaderFooter("header", "header.html");
                loadHeaderFooter("footer", "footer.html");
                /* End code */

                });

                function loadHeaderFooter(id, file) {
                    $("#" + id).load(file, function (response, status, xhr) {
                        if (status === "error") {
                            console.error("Error loading " + file + ":", xhr.status, xhr.statusText);
                            return;
                        }

                        $("#" + id).find("a").addClass("edit-site");

                        if (id === "header") {
                            if (fileName.toLowerCase() === "index" || fileName.toLowerCase() === "home") {
                                $("#" + id).find(".main-header-section").css("display", "inline-block");
                            } else {
                                $("#" + id).find(".main-header-section").css("display", "none");
                                $("#" + id).find(".header-breadcrumb-section").css("display", "inline-block");
                                $("#" + id).find(".header-breadcrumb-section .Page_name")
                                    .text(fileName.charAt(0).toUpperCase() + fileName.slice(1));
                            }
                        }
						 // Force mark editable images inside the loaded fragment
					     enableAllImageEditing();
                    });
                }
            </script>
                     <!-- <script>
// ====== Inject CSS dynamically ======
function injectEditableImageCSS() {
  const style = document.createElement("style");
  style.textContent = `
    .image-editable {
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }

    .image-editable::after {
      content: "ðŸ–‰ Edit Image";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.4);
      color: #fff;
      font-weight: bold;
      font-size: 1rem;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      pointer-events: none;
      z-index: 10;
    }

    .image-editable:hover::after {
      opacity: 1;
    }
  `;
  document.head.appendChild(style);
}

// ====== Core image edit detection ======
function enableAllImageEditing(root = document) {
  const imgElements = root.querySelectorAll("img:not(.image-editable)");
  imgElements.forEach((img) => {
    img.classList.add("image-editable");
  });

  const allElements = root.querySelectorAll("*:not(.image-editable)");
  allElements.forEach((el) => {
    const bg = window.getComputedStyle(el).backgroundImage;
    if (bg && bg !== "none" && bg.includes("url(")) {
      el.classList.add("image-editable");
    }
  });
}

// ====== Watch for dynamically added content ======
function observeDynamicImages() {
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === 1) {
          enableAllImageEditing(node);
        }
      });
    });
  });

  observer.observe(document.body, {
    childList: true,
    subtree: true,
  });
}

// ====== Initialize ======
document.addEventListener("DOMContentLoaded", () => {
  injectEditableImageCSS();
  enableAllImageEditing();
  observeDynamicImages();
});

// ====== Hook into your existing header/footer load logic ======
function loadHeaderFooter(id, file) {
  $("#" + id).load(file, function (response, status, xhr) {
    if (status === "error") {
      console.error("Error loading " + file + ":", xhr.status, xhr.statusText);
      return;
    }

    // Your existing logic
    $("#" + id).find("a").addClass("edit-site");
    if (id === "header") {
      if (fileName.toLowerCase() === "index" || fileName.toLowerCase() === "home") {
        $("#" + id).find(".main-header-section").css("display", "inline-block");
      } else {
        $("#" + id).find(".main-header-section").css("display", "none");
        $("#" + id).find(".header-breadcrumb-section").css("display", "inline-block");
        $("#" + id).find(".header-breadcrumb-section .Page_name")
          .text(fileName.charAt(0).toUpperCase() + fileName.slice(1));
      }
    }

    // âœ… Re-run detection after each dynamic load
    enableAllImageEditing(document.getElementById(id));
  });
}
</script> -->
<!-- <script>
     const token = localStorage.getItem('feature_key'); 
      const repoOwner = localStorage.getItem('owner');
      const repoName = localStorage.getItem('repo_name');
      let commitMessage = "Update test via API";

      const branch = "main"; 

// ======= Inject Orange Overlay CSS =======
function injectEditableImageCSS() {
  const style = document.createElement("style");
  style.textContent = `
    .image-editable {
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
    }

    .image-editable::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(255, 165, 0, 0.4);
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      pointer-events: none;
      z-index: 10;
    }

    .image-editable:hover::after {
      opacity: 1;
    }

    .preview-overlay {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      z-index: 11;
      opacity: 0.9;
    }
  `;
  document.head.appendChild(style);
}

// ======= Add .image-editable to images & backgrounds =======
function enableAllImageEditing(root = document) {
  // <img> tags
  const imgs = root.querySelectorAll("img:not(.image-editable-initialized)");
  imgs.forEach((img) => {
    img.classList.add("image-editable", "image-editable-initialized");

    img.addEventListener("click", (e) => {
      const parentLink = img.closest("a");
      if (parentLink) {
        e.preventDefault();
        e.stopPropagation();
      }
      handleEdit(img, false);
    });
  });

  // Elements with background images
  const all = root.querySelectorAll("*:not(.image-editable-initialized)");
  all.forEach((el) => {
    const bg = window.getComputedStyle(el).backgroundImage;
    if (bg && bg !== "none" && bg.includes("url(")) {
      el.classList.add("image-editable", "image-editable-initialized");
      el.addEventListener("click", () => handleEdit(el, true));
    }
  });
}


// ======= Handle Image Edit (Upload Flow) =======
async function handleEdit(element, isBackground) {
  const originalSrc = isBackground
    ? extractUrlFromBackground(element)
    : element.getAttribute("src");

  // Create file input dynamically
  const fileInput = document.createElement("input");
  fileInput.type = "file";
  fileInput.accept = "image/*";
  fileInput.style.display = "none";
  document.body.appendChild(fileInput);
  fileInput.click();

  fileInput.addEventListener("change", async () => {
    const file = fileInput.files[0];
    if (!file) return;
    const base64 = await toBase64(file);

    // Show temporary preview overlay
    let preview;
    if (isBackground) {
      preview = document.createElement("div");
      preview.className = "preview-overlay";
      preview.style.backgroundImage = `url(${base64})`;
      element.appendChild(preview);
    } else {
      element.dataset.oldSrc = element.src;
      element.src = base64;
    }

    const confirmUpload = confirm("Do you want to upload this image?");
    if (!confirmUpload) {
      // Cancel upload â†’ restore original
      if (isBackground) preview.remove();
      else element.src = element.dataset.oldSrc;
      fileInput.remove();
      return;
    }

    // Proceed to upload
    const repoImagePath = extractRepoPath(originalSrc);
    if (!repoImagePath) {
      alert("Unable to resolve GitHub file path from image src.");
      fileInput.remove();
      return;
    }

    const sha = await getLatestSha(repoImagePath);
    const commitMessage = `Update ${repoImagePath} via editor`;

    const response = await fetch(
      `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${repoImagePath}`,
      {
        method: "PUT",
        headers: {
          Authorization: `token ${token}`,
          Accept: "application/vnd.github+json",
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          message: commitMessage,
          content: base64.split(",")[1],
          sha: sha,
          branch: branch,
        }),
      }
    );

    const result = await response.json();
    console.log("Upload result:", result);

    if (result.content && result.commit) {
      const blobSha = result.content.sha;
      const latest = await fetch(
        `https://api.github.com/repos/${repoOwner}/${repoName}/git/blobs/${blobSha}`,
        {
          headers: {
            Authorization: `token ${token}`,
            Accept: "application/vnd.github+json",
          },
        }
      );
      const latestData = await latest.json();
      const newBase64 = "data:image/png;base64," + latestData.content;

      if (isBackground) {
        element.style.backgroundImage = `url(${newBase64})`;
        if (preview) preview.remove();
      } else {
        element.src = newBase64;
      }

      alert("âœ… Image uploaded successfully!");
    } else {
      alert("âŒ Upload failed: " + result.message);
      if (isBackground) preview.remove();
      else element.src = element.dataset.oldSrc;
    }

    fileInput.remove();
  });
}

// ======= Dynamic content watcher =======
function observeDynamicImages() {
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === 1) enableAllImageEditing(node);
      });
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
}

// ======= Helpers =======
function extractUrlFromBackground(el) {
  const bg = window.getComputedStyle(el).backgroundImage;
  const match = bg.match(/url\(["']?(.*?)["']?\)/);
  return match ? match[1] : null;
}

function extractRepoPath(src) {
  try {
    const url = new URL(src, window.location.origin);
    const path = url.pathname;
    if (path.includes("/assets/images/")) {
      return "public" + path;
    }
  } catch (e) {
    console.error("Invalid image src:", src);
  }
  return null;
}

function toBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () => resolve(reader.result);
    reader.onerror = (error) => reject(error);
  });
}

async function getLatestSha(filePath) {
  try {
    const res = await fetch(
      `https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}?ref=${branch}`,
      {
        headers: {
          Authorization: `token ${token}`,
          Accept: "application/vnd.github+json",
        },
      }
    );
    if (res.ok) {
      const data = await res.json();
      return data.sha;
    }
  } catch {
    console.warn("SHA fetch failed or file not found, will create new.");
  }
  return null;
}

// ======= Init =======
document.addEventListener("DOMContentLoaded", () => {
  injectEditableImageCSS();
  enableAllImageEditing();
  observeDynamicImages();
});

// ======= Patch your loadHeaderFooter() =======
function loadHeaderFooter(id, file) {
  $("#" + id).load(file, function (response, status, xhr) {
    if (status === "error") {
      console.error("Error loading " + file + ":", xhr.status, xhr.statusText);
      return;
    }
    enableAllImageEditing(document.getElementById(id));
  });
}
</script> -->



     <!-- <script src="assets/js/common_js/edit_image.js"></script> -->


        

    
</body></html>
